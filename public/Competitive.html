<!DOCTYPE html>
<html>
    <head>
        <title>Connect 4</title>
        <meta charset="utf-8" />
        <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/js/entity-creation.js"></script>
    </head>

    <body>
        <a-scene background="color:rgb(0, 0, 0);">

            <!--WASD Controls-->
            <a-entity camera wasd-controls look-controls position="0 1.6 0">
                <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:200; objects:.interactive"></a-entity>
            </a-entity>

            <!--Floor-->
            <a-entity class="ground"  geometry="primitive:plane; width:14; height:14;" material="color:white;" position="0 0.01 -10" rotation="-90 0 0"></a-entity>

            <!--Connect 4 Board-->
            <a-entity id="board" position="0, 5, -10" rotation="0, 90, 0">
                <a-entity geometry="primitive:box; height:10; width:10; depth:0.25" material="color:rgb(192, 192, 192)"></a-entity>
            </a-entity>

            <!-- red buttons -->
            <a-entity id="red_button1" position="1 0.6 -10">
                <a-entity id="red_1"class="button interactive" position="0 0.6 -4" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 -4; to:0 0.6 -4; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -4" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button2" position="1 0.6 -10">
                <a-entity id="red_2" class="button interactive" position="0 0.6 -2.65" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 -2.65; to:0 0.6 -2.65; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -2.65" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button3" position="1 0.6 -10">
                <a-entity id="red_3" class="button interactive" position="0 0.6 -1.3" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 -1.3; to:0 0.6 -1.3; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -1.3" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button4" position="1 0.6 -10">
                <a-entity id= "red_4" class="button interactive" position="0 0.6 0.05" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 0.05; to:0 0.6 0.05; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 0.05" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button5" position="1 0.6 -10">
                <a-entity id= "red_5" class="button interactive" position="0 0.6 1.4" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 1.4; to:0 0.6 1.4; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 1.4" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button6" position="1 0.6 -10">
                <a-entity id= "red_6" class="button interactive" position="0 0.6 2.75" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 2.75; to:0 0.6 2.75; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 2.75" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="red_button7" position="1 0.6 -10">
                <a-entity id= "red_7" class="button interactive" position="0 0.6 4.1" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 4.1; to:0 0.6 4.1; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 4.1" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <!-- blue buttons -->
            <a-entity id="blue_button1" position="-1 0.6 -10">
                <a-entity id= "blue_1" class="button interactive" position="0 0.6 -4" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                            animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                            animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                            animation__click="property:position; from:0 0.55 -4; to:0 0.6 -4; startEvents:click; dur:300" shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -4" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="blue_button2" position="-1 0.6 -10">
                <a-entity id= "blue_2" class="button interactive" position="0 0.6 -2.65" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                            animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                            animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                            animation__click="property:position; from:0 0.55 -2.65; to:0 0.6 -2.65; startEvents:click; dur:300" shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -2.65" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="blue_button3" position="-1 0.6 -10">
                <a-entity id= "blue_3" class="button interactive" position="0 0.6 -1.3" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                            animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                            animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                            animation__click="property:position; from:0 0.55 -1.3; to:0 0.6 -1.3; startEvents:click; dur:300" shadow entity-creation></a-entity>
                <a-entity position="0 0.3 -1.3" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="blue_button4" position="-1 0.6 -10">
                <a-entity id="blue_4" class="button interactive" position="0 0.6 0.05" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                animation__click="property:position; from:0 0.55 0.05; to:0 0.6 0.05; startEvents:click; dur:300" shadow entity-creation></a-entity>
                <a-entity position="0 0.3 0.05" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="blue_button5" position="-1 0.6 -10">
                 <a-entity id= "blue_5" class="button interactive" position="0 0.6 1.4" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                            animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                            animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                            animation__click="property:position; from:0 0.55 1.4; to:0 0.6 1.4; startEvents:click; dur:300" 
                            shadow entity-creation></a-entity>
                <a-entity position="0 0.3 1.4" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity> 
            </a-entity>

            <a-entity id="blue_button6" position="-1 0.6 -10">
                <a-entity id= "blue_6" class="button interactive" position="0 0.6 2.75" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 2.75; to:0 0.6 2.75; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 2.75" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

            <a-entity id="blue_button7" position="-1 0.6 -10">
                <a-entity id= "blue_7" class="button interactive" position="0 0.6 4.1" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 255)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(0, 0, 255); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(100, 100, 255); startEvents:mouseleave; dur:200"
                    animation__click="property:position; from:0 0.55 4.1; to:0 0.6 4.1; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 4.1" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>

                <!--Reset Button-->
            <a-entity id="reset_button" position="0 0.6 -4">
                <a-entity id="reset_0" class="button interactive" position="0 0.6 0" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(100, 100, 100)"
                    animation__mouseenter="property:material.color; type:color; to:rgb(100, 100, 100); startEvents:mouseenter; dur:200"
                    animation__mouseleave="property:material.color; type:color; to:rgb(135, 135, 135); startEvents:mouseleave; dur:200"
                    animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300" 
                    shadow entity-creation></a-entity>
                <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:rgb(255, 255, 255)" shadow></a-entity>
            </a-entity>
        </a-scene>

        <script>    //script tags put here to run after content is created
            let socket = io();
            
            socket.on('connect', (data) => {
                //Red Button actions when pressed
                document.querySelector('#red_button1').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button2').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button3').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button4').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button5').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button6').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });
                document.querySelector('#red_button7').querySelector('.button').addEventListener('click', function() {
                    socket.emit('blue');
                });

                //Blue Button actions when pressed
                document.querySelector('#blue_button1').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button2').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button3').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button4').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button5').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button6').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });
                document.querySelector('#blue_button7').querySelector('.button').addEventListener('click', function() {
                    socket.emit('red');
                });

                //changes bg colour from emissions above
                socket.on('color_change', (data) => {
                    let colorStr = 'rgb(' + data.r + ', ' + data.g + ', ' + data.b + ')';
                    document.querySelector('a-scene').setAttribute('background', {color:colorStr});

                    console.log('color_change: ' + colorStr);
                });
            });
        </script>
    </body>
</html>
